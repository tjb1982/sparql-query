(function(){function e(t,n,r){var i=e.resolve(t);if(null==i){r=r||t,n=n||"root";var s=new Error('Failed to require "'+r+'" from "'+n+'"');throw s.path=r,s.parent=n,s.require=!0,s}var o=e.modules[i];if(!o._resolving&&!o.exports){var u={};u.exports={},u.client=u.component=!0,o._resolving=!0,o.call(this,u.exports,e.relative(i),u),delete o._resolving,o.exports=u.exports}return o.exports}e.modules={},e.aliases={},e.resolve=function(t){t.charAt(0)==="/"&&(t=t.slice(1));var n=[t,t+".js",t+".json",t+"/index.js",t+"/index.json"];for(var r=0;r<n.length;r++){var t=n[r];if(e.modules.hasOwnProperty(t))return t;if(e.aliases.hasOwnProperty(t))return e.aliases[t]}},e.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var r=0;r<t.length;++r)".."==t[r]?e.pop():"."!=t[r]&&""!=t[r]&&n.push(t[r]);return e.concat(n).join("/")},e.register=function(t,n){e.modules[t]=n},e.alias=function(t,n){if(!e.modules.hasOwnProperty(t))throw new Error('Failed to alias "'+t+'", it does not exist');e.aliases[n]=t},e.relative=function(t){function r(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function i(n){var r=i.resolve(n);return e(r,t,n)}var n=e.normalize(t,"..");return i.resolve=function(i){var s=i.charAt(0);if("/"==s)return i.slice(1);if("."==s)return e.normalize(n,i);var o=t.split("/"),u=r(o,"deps")+1;return u||(u=0),i=o.slice(0,u+1).join("/")+"/deps/"+i,i},i.exists=function(t){return e.modules.hasOwnProperty(i.resolve(t))},i},e.register("sparql-query/index.js",function(e,t,n){e.Query=t("./abstract/query"),e.ConstructQuery=t("./concrete/construct")}),e.register("sparql-query/abstract/query.js",function(e,t,n){function i(e){return Object.prototype.toString.call(e)==="[object Array]"}var r=function(){};r.prototype.flattenInput=function(e){var t=this;return i(e)?e.map(function(n,r){if(i(n))return t.flattenInput(n)[0];var s=e[r+1];switch(n.split(/\s+/g).length){case 3:return n;case 2:return i(s)&&n+" "+s.join(" , ");case 1:return i(s)&&function(){return s=s.map(function(e,t){if(i(e)){var n=s[t-1],r=e.join(" , ");return n+" "+r}return e}).filter(function(e){return e}),s.length?n+" "+s.join(" ; "):""}();default:return n}}).filter(function(e){return e}):e},r.prototype.where=function(e){var t=this;return this._whereClauses=this._whereClauses||[],this.flattenInput(e).map(function(e){t._whereClauses.push(e)}),this},r.prototype.optional=function(e){var t=this;return this._optional=this._optional||[],t._whereClauses.push("optional { "+this.flattenInput(e).join(" . ")+" } "),this},r.prototype.out=r.prototype.serialize=function(e){var t=this;return e&&e.map(function(n,r){var i=r===e.length-1?/%s/g:/%s/;t._out=t._out.replace(i,n)}),this._out},n.exports=r}),e.register("sparql-query/concrete/construct.js",function(e,t,n){var r=t("../abstract/query"),i=function(e){e=e||{},this._constructTriples=e.construct&&this.flattenInput(e.construct)||[],this._whereClauses=e.where&&this.flattenInput(e.where)||[]};i.prototype=Object.create(r.prototype),i.prototype.construct=function(e){var t=this;return this.flattenInput(e).forEach(function(e){t._constructTriples.push(e)}),this},i.prototype.serialize=i.prototype.out=function(e){return this._out="construct { "+this._constructTriples.join(" . ")+" } where { "+this._whereClauses.join(" . ")+" }",r.prototype.out.call(this,e)};var s="core:test";n.exports=i}),e.alias("sparql-query/index.js","sparql-query/index.js"),typeof exports=="object"?module.exports=e("sparql-query"):typeof define=="function"&&define.amd?define([],function(){return e("sparql-query")}):this["sparql-query"]=e("sparql-query")})();